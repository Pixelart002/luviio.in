{% extends "app/base.html" %}

{# --- IMPORT MACROS --- #}
{% from "app/macros/index_page/header.html" import render_header %}
{% from "app/macros/index_page/hero.html" import render_hero %}
{# (Aise hi footer aur baki macros bhi import honge) #}

{# --- INJECT INTO HEADER SLOT --- #}
{% block global_header %}
    {{ render_header(cart_count=2) }}
{% endblock %}

{# --- INJECT INTO MAIN WORKSPACE --- #}
{% block body_content %}
    
    {# 1. Hero Section #}
    {{ render_hero() }}

    {# 2. Grid Section (GSAP Reveal via Unpoly Compiler) #}
    <section class="max-w-7xl mx-auto px-6 lg:px-12 py-24">
        <h2 class="font-['Playfair_Display'] text-4xl mb-12 text-center gsap-reveal">Curated Ceramics</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="group cursor-pointer gsap-reveal" up-target="#spa-workspace" href="/product/1">
                <div class="aspect-[4/5] bg-slate-200 rounded-2xl overflow-hidden mb-4 relative">
                    <div class="absolute inset-0 bg-slate-900/10 group-hover:bg-transparent transition-colors z-10"></div>
                    <div class="w-full h-full bg-gradient-to-tr from-stone-300 to-stone-100 transform group-hover:scale-105 transition-transform duration-700"></div>
                </div>
                <h3 class="font-['Outfit'] font-bold text-lg">Onyx Basin</h3>
                <p class="text-teal-700 font-medium">â‚¹12,499</p>
            </div>
            </div>
    </section>

{% endblock %}

{# --- EXTREME GSAP PHYSICS FOR THIS PAGE --- #}
{% block page_scripts %}
<script>
    // Ye function Unpoly aur Initial Load dono pe chalega
    function playLandingPhysics() {
        // Master Timeline (Cinematic ease)
        const tl = gsap.timeline({ 
            defaults: { ease: "expo.out" } 
        });

        // 1. Header Dropdown
        tl.fromTo("#luxury-header", 
            { y: -100, opacity: 0 }, 
            { y: 0, opacity: 1, duration: 1.2 }
        )
        // 2. Hero Text Reveal (Staggered like a movie title)
        .fromTo(".hero-text-line", 
            { y: 100, opacity: 0, skewY: 5 }, 
            { y: 0, opacity: 1, skewY: 0, duration: 1.5, stagger: 0.2 },
            "-=0.8" // Overlap header animation
        )
        // 3. Subtext Fade In
        .fromTo(".hero-subtext", 
            { y: 20, opacity: 0 }, 
            { y: 0, opacity: 1, duration: 1 },
            "-=1"
        )
        // 4. Button Pop Up
        .fromTo(".hero-btn-wrapper", 
            { y: 30, opacity: 0, scale: 0.9 }, 
            { y: 0, opacity: 1, scale: 1, duration: 1, ease: "back.out(1.5)" },
            "-=0.8"
        );

        // 5. Ambient Blob Physics (Continuous slow floating)
        gsap.to("#hero-blob", {
            y: 50,
            x: -30,
            scale: 1.1,
            duration: 8,
            repeat: -1,
            yoyo: true,
            ease: "sine.inOut"
        });
    }

    // Run on initial page load
    document.addEventListener("DOMContentLoaded", playLandingPhysics);

    // Run when Unpoly navigates back to this page via SPA
    up.on('up:fragment:inserted', (event) => {
        if (event.target.querySelector('.hero-text-line')) {
            playLandingPhysics();
        }
    });
</script>
{% endblock %}