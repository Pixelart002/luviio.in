{% extends "app/base.html" %}

{% from "macros/index_page/header.html" import render_header %}
{% from "macros/index_page/drawer.html" import render_drawer %}
{% from "macros/index_page/footer.html" import render_footer %}
{% from "macros/index_page/hero.html" import render_hero %}

{% block header %}
{{ render_header() }}
{% endblock %}

{% block content %}
<style>
  /* Lenis smooth scroll base */
  html.lenis, html.lenis body { height: auto; width: 100vw; overflow-x: hidden; }
  .lenis.lenis-smooth { scroll-behavior: auto !important; }
  .lenis.lenis-smooth [data-lenis-prevent] { overscroll-behavior: contain; }
  .lenis.lenis-stopped { overflow: hidden; }
  .lenis.lenis-scrolling iframe { pointer-events: none; }
  
  /* Aceternity UI glass card utility */
  .glass-card {
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.05);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    will-change: transform, opacity;
  }
  
  .text-glow {
    text-shadow: 0 0 40px rgba(45, 212, 191, 0.4);
  }

  /* Hero background fix */
  #main-content > section:first-of-type {
    background: #fafafa !important;
  }
  #main-content > section:first-of-type * {
    color: #1e293b;
  }
  #main-content > section:first-of-type .absolute.bg-gradient-to-b {
    background: linear-gradient(to bottom, #f1f5f9, #ffffff) !important;
  }
</style>

{{ render_drawer() }}

<div id="main-content" class="w-full bg-[#050507] text-slate-200">
  <!-- Hero Section (with image, slide-in logo, "We are start producing") -->
  <section class="relative w-full min-h-screen flex items-center justify-center overflow-hidden px-4 py-20 md:py-0">
    <div class="absolute inset-0 bg-gradient-to-b from-slate-900 to-black -z-10"></div>
    <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1618220179428-22790b461013?w=1400&q=90')] bg-cover bg-center opacity-30 mix-blend-overlay"></div>
    
    <div class="relative z-10 text-center max-w-4xl mx-auto">
      <!-- Slide-in logo (animated via GSAP) -->
      <div id="slide-logo" class="mb-6 opacity-0 translate-y-10">
        <span class="font-['Playfair_Display'] text-7xl md:text-9xl font-black text-white">LUV100</span>
      </div>
      <p id="hero-tagline" class="text-xl md:text-3xl text-slate-300 mb-8 opacity-0 translate-y-10">We are start producing</p>
      <div id="hero-timeline" class="flex justify-center gap-4 text-sm text-teal-400 opacity-0 translate-y-10">
        <span>✦ 2026 ✦</span>
        <span>✦ EDITION ✦</span>
        <span>✦ LIMITED ✦</span>
      </div>
    </div>
  </section>

  <!-- Profile Section -->
  <section class="relative w-full py-24 bg-[#050507]">
    <div class="max-w-7xl mx-auto px-6">
      <div class="glass-card rounded-3xl p-8 md:p-12 max-w-md mx-auto">
        <h2 class="font-['Playfair_Display'] text-3xl md:text-4xl text-white mb-6">Profile</h2>
        <div class="space-y-4 text-slate-300">
          <div><span class="text-teal-400">Account:</span> @luviio_user</div>
          <div><span class="text-teal-400">Username:</span> luviio_official</div>
          <div><span class="text-teal-400">Name:</span> Luviio Studio</div>
          <div><span class="text-teal-400">Email:</span> contact@luviio.in</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Our Partners -->
  <section class="relative w-full py-24 bg-[#050507]">
    <div class="max-w-7xl mx-auto px-6 text-center">
      <h2 class="font-['Playfair_Display'] text-4xl md:text-5xl text-white mb-12">Our Partners</h2>
      <div class="glass-card rounded-3xl p-10 inline-block">
        <span class="text-2xl text-teal-400 font-light">Small‑run</span>
      </div>
    </div>
  </section>

  <!-- Reviews -->
  <section class="relative w-full py-24 bg-[#050507]">
    <div class="max-w-7xl mx-auto px-6">
      <h2 class="font-['Playfair_Display'] text-4xl md:text-5xl text-white mb-12 text-center">Reviews</h2>
      <div class="glass-card rounded-3xl p-8 max-w-lg mx-auto">
        <div class="flex justify-between items-center mb-4">
          <span class="text-teal-400 font-bold">UserName: 8</span>
          <span class="text-slate-400 text-sm">Date day year</span>
        </div>
        <p class="text-slate-300">"Absolutely stunning craftsmanship. The Obsidian line is a masterpiece."</p>
      </div>
    </div>
  </section>

  <!-- Team (step by step faded) -->
  <section class="relative w-full py-24 bg-[#050507]">
    <div class="max-w-7xl mx-auto px-6">
      <h2 class="font-['Playfair_Display'] text-4xl md:text-5xl text-white mb-12 text-center">Team</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8" id="team-grid">
        <!-- Team member 1 -->
        <div class="team-card glass-card rounded-2xl p-6 text-center opacity-0">
          <div class="w-32 h-32 mx-auto rounded-full bg-cover bg-center mb-4" style="background-image: url('https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=200&q=80')"></div>
          <h3 class="text-xl font-bold text-white">Alex Rivera</h3>
          <p class="text-teal-400">Lead Designer</p>
        </div>
        <!-- Team member 2 -->
        <div class="team-card glass-card rounded-2xl p-6 text-center opacity-0">
          <div class="w-32 h-32 mx-auto rounded-full bg-cover bg-center mb-4" style="background-image: url('https://images.unsplash.com/photo-1618219944342-824e40a1328e?w=200&q=80')"></div>
          <h3 class="text-xl font-bold text-white">Maya Chen</h3>
          <p class="text-teal-400">Head of Materials</p>
        </div>
        <!-- Team member 3 -->
        <div class="team-card glass-card rounded-2xl p-6 text-center opacity-0">
          <div class="w-32 h-32 mx-auto rounded-full bg-cover bg-center mb-4" style="background-image: url('https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=200&q=80')"></div>
          <h3 class="text-xl font-bold text-white">Kai Tanaka</h3>
          <p class="text-teal-400">Craftsmanship Lead</p>
        </div>
      </div>
    </div>
  </section>

  <!-- GET IN TOUCH -->
  <section class="relative w-full py-24 bg-[#050507]">
    <div class="max-w-7xl mx-auto px-6">
      <div class="glass-card rounded-3xl p-10 max-w-lg mx-auto">
        <h2 class="font-['Playfair_Display'] text-3xl md:text-4xl text-white mb-8">GET IN TOUCH</h2>
        <div class="space-y-6">
          <div>
            <label class="block text-sm text-slate-400 mb-2">Email</label>
            <input type="email" placeholder="your@email.com" class="w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-white">
          </div>
          <div>
            <label class="block text-sm text-slate-400 mb-2">Custom</label>
            <textarea rows="3" placeholder="Your message..." class="w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-white"></textarea>
          </div>
          <button class="w-full bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 rounded-xl transition-all">Send</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer (reusing macro, but we can also add extra content if needed) -->
  {{ render_footer() }}
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.33/dist/lenis.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/ScrollTrigger.min.js"></script>

<script>
  // ----- DRAWER TOGGLING (unchanged) -----
  document.addEventListener('DOMContentLoaded', function() {
    const hamburgerBtn = document.getElementById('hamburgerBtn');
    const drawer = document.getElementById('drawer');
    const overlay = document.getElementById('drawerOverlay');
    const closeBtn = document.getElementById('closeDrawerBtn');
    const drawerLinks = drawer ? drawer.querySelectorAll('a') : [];
    
    function openDrawer() {
      if (drawer) {
        drawer.classList.remove('-translate-x-full');
        overlay.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
        const spans = hamburgerBtn?.querySelectorAll('span');
        if (spans && spans.length === 3) {
          spans[0].style.transform = 'rotate(45deg) translateY(9px) translateX(9px)';
          spans[1].style.opacity = '0';
          spans[2].style.transform = 'rotate(-45deg) translateY(-9px) translateX(9px)';
        }
      }
    }
    function closeDrawer() {
      if (drawer) {
        drawer.classList.add('-translate-x-full');
        overlay.classList.add('hidden');
        document.body.style.overflow = '';
        const spans = hamburgerBtn?.querySelectorAll('span');
        if (spans && spans.length === 3) {
          spans[0].style.transform = 'none';
          spans[1].style.opacity = '1';
          spans[2].style.transform = 'none';
        }
      }
    }
    if (hamburgerBtn) hamburgerBtn.addEventListener('click', openDrawer);
    if (closeBtn) closeBtn.addEventListener('click', closeDrawer);
    if (overlay) overlay.addEventListener('click', closeDrawer);
    drawerLinks.forEach(link => link.addEventListener('click', closeDrawer));
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && drawer && !drawer.classList.contains('-translate-x-full')) closeDrawer();
    });
  });

  // ----- GSAP ANIMATIONS -----
  (function() {
    if (typeof gsap === 'undefined' || typeof Lenis === 'undefined') return;
    gsap.registerPlugin(ScrollTrigger);

    const lenis = new Lenis({ duration: 1.2, easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)), smooth: true, smoothTouch: false });
    lenis.on('scroll', ScrollTrigger.update);
    gsap.ticker.add((time) => lenis.raf(time * 1000));
    gsap.ticker.lagSmoothing(0);

    // Hero animations: slide-in logo, tagline, timeline
    const tl = gsap.timeline({ defaults: { duration: 1, ease: 'power3.out' } });
    tl.to('#slide-logo', { opacity: 1, y: 0 })
      .to('#hero-tagline', { opacity: 1, y: 0 }, '-=0.6')
      .to('#hero-timeline', { opacity: 1, y: 0 }, '-=0.6');

    // Team step-by-step fade (scroll-triggered)
    gsap.from('.team-card', {
      scrollTrigger: {
        trigger: '#team-grid',
        start: 'top 80%',
        end: 'bottom 20%',
        scrub: 1,
      },
      opacity: 0,
      y: 50,
      stagger: 0.3,
      duration: 1,
    });
  })();
</script>
{% endblock %}