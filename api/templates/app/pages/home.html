{% extends "app/base.html" %}

{% block content %}
<section class="hero flex-1 flex flex-col justify-center items-center text-center px-5">
  <style>
    .tagline { font-size: 0.75rem; letter-spacing: 1.5px; text-transform: uppercase; color: #777; border: 1px solid var(--border); padding: 6px 14px; border-radius: 50px; margin-bottom: 24px; opacity: 0; }
    h1 { font-size: clamp(2.5rem, 8vw, 5.5rem); line-height: 1.05; font-weight: 800; background: linear-gradient(180deg, #fff 15%, #666 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; opacity: 0; margin-bottom: 24px; }
    p { color: var(--gray); font-size: clamp(1rem, 3vw, 1.25rem); max-width: 540px; line-height: 1.6; margin-bottom: 40px; opacity: 0; }
    .cta-container { opacity: 0; }
    .cta-button { background: white; color: black; padding: 16px 36px; border-radius: 100px; text-decoration: none; font-weight: 700; display: inline-flex; align-items: center; gap: 10px; transition: 0.3s; }
  </style>

  <div class="tagline">The Trust Layer</div>
  <h1>Infrastructure for <br> Verified Markets.</h1>
  <p>We verify, secure, and streamline <br> marketplace infrastructure.</p>

  <div class="cta-container">
    <a href="/waitlist/" id="main-cta" class="cta-button">
      <span id="cta-text">Join Waitlist</span> 
      <svg style="width:18px;height:18px" viewBox="0 0 448 512" fill="currentColor"><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg>
    </a>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // 1. Entrance Animations
      if (typeof gsap !== 'undefined') {
        const tl = gsap.timeline({ defaults: { ease: "power3.out", duration: 1.2 } });
        tl.to(".tagline", { opacity: 1, y: 0, delay: 0.1 })
          .to("h1", { opacity: 1, y: 0 }, "-=0.9")
          .to(".hero p", { opacity: 1, y: 0 }, "-=0.9")
          .to(".cta-container", { opacity: 1, y: 0 }, "-=0.9");
      }

      // 2. Auth State Machine Logic
      async function checkAuth() {
        if (typeof supabase !== 'undefined') {
          const client = supabase.createClient('https://enqcujmzxtrbfkaungpm.supabase.co', 'sb_publishable_0jeCSzd3NkL-RlQn8X-eTA_-xH03xVd');
          const { data: { session } } = await client.auth.getSession();
          if (session) {
            document.getElementById('cta-text').innerText = "Dashboard";
            document.getElementById('main-cta').href = "/dashboard";
          }
        }
      }
      checkAuth();
    });
  </script>
</section>
{% endblock %}