{% extends "base.html" %}
{% block content %}
<div class="max-w-2xl mx-auto py-8">
    <div class="prose mb-8 text-center">
        <h1 class="font-black text-4xl mb-0">Set Up Your Profile</h1>
        <p class="text-lg opacity-70">Welcome to LUVIIO. Let's get you ready.</p>
    </div>

    <form action="/api/auth/complete-onboarding" 
          up-submit 
          method="POST" 
          class="card bg-base-100 shadow-2xl p-8 space-y-6 border border-primary/20">
        
        <div class="form-control">
            <label class="label font-bold">What are you here to do?</label>
            <div class="flex gap-4">
                <label class="label cursor-pointer flex-1 border border-base-300 rounded-xl p-4 hover:bg-base-200 transition">
                    <span class="label-text flex flex-col">
                        <span class="font-bold text-lg">Buyer</span>
                        <span class="text-xs opacity-60 text-wrap">I want to discover and purchase.</span>
                    </span> 
                    <input type="radio" name="role" value="buyer" class="radio radio-primary" checked />
                </label>
                <label class="label cursor-pointer flex-1 border border-base-300 rounded-xl p-4 hover:bg-base-200 transition">
                    <span class="label-text flex flex-col">
                        <span class="font-bold text-lg">Seller</span>
                        <span class="text-xs opacity-60 text-wrap">I want to sell and manage items.</span>
                    </span> 
                    <input type="radio" name="role" value="seller" class="radio radio-primary" />
                </label>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="form-control">
                <label class="label"><span class="label-text font-semibold">Full Name</span></label>
                <input type="text" name="fullName" value="{{ user.full_name or '' }}" class="input input-bordered focus:input-primary" required />
            </div>
            <div class="form-control">
                <label class="label"><span class="label-text font-semibold">Username</span></label>
                <input type="text" name="username" placeholder="johndoe123" class="input input-bordered focus:input-primary" required />
            </div>
        </div>

        <div id="seller-fields" class="hidden space-y-4 p-4 bg-primary/5 rounded-xl border border-primary/10">
            <h3 class="font-bold text-primary">Store Details</h3>
            <div class="form-control">
                <input type="text" name="storeName" placeholder="Store Name" class="input input-bordered" />
            </div>
        </div>

        <button type="submit" class="btn btn-primary btn-block text-lg">Complete Onboarding ðŸš€</button>
    </form>
</div>

<script>
    // Simple toggle for Seller fields
    document.querySelectorAll('input[name="role"]').forEach(radio => {
        radio.addEventListener('change', (e) => {
            const sellerFields = document.getElementById('seller-fields');
            if (e.target.value === 'seller') {
                sellerFields.classList.remove('hidden');
            } else {
                sellerFields.classList.add('hidden');
            }
        });
    });
</script>
{% endblock %}