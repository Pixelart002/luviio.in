{# api/templates/macros/page-specific/profile_macros.html #}

{% macro render_profile_card(user) %}
<div class="profile-card" id="profile-section">
    <div class="profile-header">
        <div class="avatar-wrapper">
            <img src="{{ user.avatar_url or 'https://ui-avatars.com/api/?name=' + user.full_name }}" alt="Avatar">
            <button class="edit-avatar"><i class="ri-camera-switch-line"></i></button>
        </div>
        <div class="profile-info">
            <h2>{{ user.full_name }}</h2>
            <p class="role-badge">{{ user.role or 'Member' }}</p>
        </div>
    </div>

    <form action="/api/v1/update-profile" method="POST" up-target="#profile-section" class="profile-details">
        <div class="input-grid">
            <div class="field">
                <label>Full Name</label>
                <input type="text" name="full_name" value="{{ user.full_name }}" required>
            </div>
            <div class="field">
                <label>Email Address</label>
                <input type="email" value="{{ user.email }}" disabled class="disabled-input">
                <small>Email cannot be changed</small>
            </div>
        </div>

        <div class="bio-section">
            <label>Bio</label>
            <textarea name="bio" placeholder="Tell us about yourself...">{{ user.bio }}</textarea>
        </div>

        <button type="submit" class="btn-save">
            <span class="up-show-loader">Saving...</span>
            <span class="up-hide-loader">Update Profile</span>
        </button>
    </form>
</div>

<style>
    .profile-card {
        background: var(--card-bg);
        backdrop-filter: blur(20px);
        border: 1px solid var(--border);
        border-radius: 24px;
        padding: 40px;
        max-width: 600px;
        margin: 20px auto;
    }
    .profile-header { display: flex; align-items: center; gap: 25px; margin-bottom: 35px; }
    .avatar-wrapper { position: relative; width: 100px; height: 100px; }
    .avatar-wrapper img { width: 100%; height: 100%; border-radius: 50%; border: 3px solid var(--accent); }
    .edit-avatar { position: absolute; bottom: 0; right: 0; background: var(--accent); color: white; border: none; border-radius: 50%; padding: 8px; cursor: pointer; }
    
    .input-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
    .field label { display: block; color: var(--text-dim); font-size: 0.85rem; margin-bottom: 8px; }
    .field input, textarea { 
        width: 100%; background: rgba(0,0,0,0.2); border: 1px solid var(--border); 
        color: white; padding: 12px; border-radius: 12px; outline: none; 
    }
    .disabled-input { opacity: 0.5; cursor: not-allowed; }
    
    .btn-save { 
        width: 100%; background: white; color: black; font-weight: 700; 
        padding: 15px; border-radius: 50px; border: none; cursor: pointer; margin-top: 20px;
    }
</style>
{% endmacro %}