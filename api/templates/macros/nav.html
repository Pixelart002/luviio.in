import os
from fastapi import APIRouter, Request, Header
from fastapi.responses import HTMLResponse

router = APIRouter()

@router.get("/", response_class=HTMLResponse)
async def render_home(request: Request, x_up_target: str = Header(None)):
"""
Home Page Route:
Supports Responsive Header Macro with Blazing Fast Unpoly Fragments.
"""
# Global template engine access (from app.state in main.py)
templates = request.app.state.templates

# Context dictionary: Macro ke parameters ke saath sync kiya gaya hai
context = {
"request": request,
"title": "LUVIIO | Overview",
"active_page": "home", # Macro: active_page highlight ke liye
"user": None, # Future: Supabase auth session yahan jayega
"up_fragment": x_up_target is not None, # Unpoly logic

# Macro Flags: State machines for UI behavior
"nav_flags": {
"sticky": True,
"glass": True
}
}

# Path: api/templates/app/pages/home.html
return templates.TemplateResponse("app/pages/home.html", context)