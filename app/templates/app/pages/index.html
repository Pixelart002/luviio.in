{% extends "app/base.html" %}

{% block header %}
{{ render_header(state) }}
{% endblock %}

{% block sidebar %}
{{ render_drawer(state) }}
{% endblock %}

{% block content %}
<!-- Hero section -->
{{ render_hero() }}

<!-- Featured Materials Section (using generic section macro) -->
{% call render_section("Featured Materials", id="featured", class="bg-white") %}
<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
  <!-- Material cards dynamically from state -->
  {% for material in state.featured_materials %}
  <div class="material-card group cursor-pointer">
    <div class="aspect-square bg-slate-100 rounded-3xl mb-4 overflow-hidden">
      <img src="{{ material.image }}" alt="{{ material.name }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700">
    </div>
    <h3 class="font-['Playfair_Display'] text-2xl">{{ material.name }}</h3>
    <p class="text-slate-500 text-sm mt-2">{{ material.description }}</p>
    <a href="{{ material.url }}" class="inline-block mt-4 text-teal-700 text-sm font-bold uppercase tracking-wider">Discover →</a>
  </div>
  {% endfor %}
</div>
{% endcall %}

<!-- Article about philosophy -->
{% call render_article("The Philosophy of Water", class="max-w-3xl mx-auto text-center") %}
<p class="text-slate-600 text-lg leading-relaxed">
  Water is not just a medium; it is a partner in design. At Luviio, we study its flow, its sound, its light reflection to create spaces that breathe.
</p>
{% endcall %}

<!-- Aside with quick facts -->
{% call render_aside(title="Did you know?", class="bg-slate-50") %}
<ul class="space-y-4 text-slate-700">
  <li>✦ Our ceramic blends take 72 hours to mature.</li>
  <li>✦ Each piece is hand‑finished by master artisans.</li>
  <li>✦ We use 100% recycled water in production.</li>
</ul>
{% endcall %}
{% endblock %}

{% block footer %}
{{ render_footer(state) }}
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
  // Page-specific animation definitions
  window.animatePage = function() {
    // Hero animations
    gsap.from('.reveal-line', { y: 100, opacity: 0, duration: 1 });
    gsap.from('h1 span', { y: 50, opacity: 0, stagger: 0.2, duration: 0.8, delay: 0.2 });
    gsap.from('.hero-p', { y: 30, opacity: 0, duration: 0.8, delay: 0.4 });
    gsap.from('.hero-actions', { y: 20, opacity: 0, duration: 0.6, delay: 0.6 });
    
    // ScrollTrigger for material cards
    gsap.from('.material-card', {
      scrollTrigger: {
        trigger: '#featured',
        start: 'top 80%',
      },
      y: 60,
      opacity: 0,
      duration: 0.8,
      stagger: 0.1
    });
  };
  // Run now in case DOMContentLoaded already fired
  if (document.readyState === 'complete' || document.readyState === 'interactive') {
    setTimeout(window.animatePage, 100);
  }
</script>
{% endblock %}